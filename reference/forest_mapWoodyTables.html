<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Map forest plot data — forest_mapWoodyTables • medfate</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Map forest plot data — forest_mapWoodyTables"><meta property="og:description" content="Mapping functions to facilitate building forest objects from forest plot data"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">medfate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/emf-creaf/medfate/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map forest plot data</h1>
    <small class="dont-index">Source: <a href="https://github.com/emf-creaf/medfate/blob/HEAD/R/forest_mapWoodyTables.R" class="external-link"><code>R/forest_mapWoodyTables.R</code></a></small>
    <div class="hidden name"><code>forest_mapWoodyTables.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Mapping functions to facilitate building forest objects from forest plot data</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">forest_mapTreeTable</span><span class="op">(</span><span class="va">x</span>, <span class="va">mapping_x</span>, <span class="va">SpParams</span>, plot_size_x <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">forest_mapShrubTable</span><span class="op">(</span><span class="va">y</span>, <span class="va">mapping_y</span>, <span class="va">SpParams</span>, plot_size_y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">forest_mapWoodyTables</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mapping_x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mapping_y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">SpParams</span>,</span>
<span>  plot_size_x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot_size_y <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A data frame with tree records in rows and attributes in columns. Tree records can correspond to individual trees or groups of trees with an associated density.</p></dd>


<dt>mapping_x</dt>
<dd><p>A named character vector to specify mappings of columns in <code>x</code> into attributes of <code>treeData</code> data frames. Accepted names (and the corresponding specifications for the columns in <code>x</code> are:</p></dd>


<dt>SpParams</dt>
<dd><p>A data frame with species parameters (see <code><a href="SpParams.html">SpParamsMED</a></code>) from which valid species names are drawn.</p></dd>


<dt>plot_size_x</dt>
<dd><p>The size of tree plot sampled area (in m2). Alternatively, 'plot_size_x'
can be a column in <code>x</code> and specified in <code>mapping_x</code> to indicate that trees
have been measured in different subplots and, therefore, they represent different
densities per hectare.</p></dd>


<dt>y</dt>
<dd><p>A data frame with shrub records in rows and attributes in columns. Records can correspond to individual shrubs (with crown dimensions and height) or groups of shrubs with an associated cover estimate.</p></dd>


<dt>mapping_y</dt>
<dd><p>A named character vector to specify mappings of columns in <code>y</code> into attributes of <code>shrubData</code> data frames. Accepted names (and the corresponding specifications for the columns in <code>y</code>) are:</p><ul><li><p>"Species": Species code (should follow codes in <code>SpParams</code>).</p></li>
<li><p>"Species.name": Species name. In this case, the species code will be drawn by matching names with species names in <code>SpParams</code>.</p></li>
<li><p>"N": Tree density (in ind./ha).</p></li>
<li><p>"Cover": Shrub cover (in %).</p></li>
<li><p>"D1": Shrub largest crown diameter (in cm).</p></li>
<li><p>"D2": Shrub crown diameter orthogonal to the largest one (in cm).</p></li>
<li><p>"plot.size": Plot size (in m2) to which each record refers to. This is used to calculate tree density (stems per hectare) when not supplied or shrub cover when shrub data is given at the individual level.</p></li>
<li><p>"DBH": Diameter at breast height (in cm).</p></li>
<li><p>"Height": Tree or shrub height (in cm).</p></li>
<li><p>"Z50": Depth (in mm) corresponding to 50% of fine roots.</p></li>
<li><p>"Z95": Depth (in mm) corresponding to 95% of fine roots.</p></li>
</ul></dd>


<dt>plot_size_y</dt>
<dd><p>The size of shrub plot sampled area (in m2). Alternatively, 'plot_size_y'
can be a column in <code>y</code> and specified in <code>mapping_y</code> to indicate that shrubs
have been measured in different subplots and, therefore, they represent different
cover values.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Functions <code>forest_mapTreeTable</code> and <code>forest_mapShrubTable</code> return a data frame with the structure of <code>treeData</code> and <code>shrubData</code> from <code><a href="forest.html">forest</a></code> objects. Function <code>forest_mapWoodyTable</code> returns directly a <code><a href="forest.html">forest</a></code> object.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="forest.html">forest</a></code>, <code><a href="poblet_trees.html">poblet_trees</a></code>, <code><a href="forest_simplification.html">forest_mergeTrees</a></code>, <code><a href="tree2forest.html">tree2forest</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Miquel De Cáceres Ainsa, EMF-CREAF</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load species parameters</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an empty forest object</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="forest.html">emptyforest</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (1) Mapping tree data</span></span></span>
<span class="r-in"><span><span class="co"># Load Poblet tree data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">poblet_trees</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Subset control plot</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">poblet_trees</span>, <span class="va">Plot.Code</span><span class="op">==</span><span class="st">"POBL_CTL"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Estimate sampled area (15-m radius plot)</span></span></span>
<span class="r-in"><span><span class="va">sampled_area</span> <span class="op">&lt;-</span> <span class="va">pi</span><span class="op">*</span><span class="fl">15</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define mapping</span></span></span>
<span class="r-in"><span><span class="va">mapping_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species.name"</span> <span class="op">=</span> <span class="st">"Species"</span>, <span class="st">"DBH"</span> <span class="op">=</span> <span class="st">"Diameter.cm"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Map tree data for plot 'POBL_CTL'</span></span></span>
<span class="r-in"><span><span class="va">f</span><span class="op">$</span><span class="va">treeData</span> <span class="op">&lt;-</span> <span class="fu">forest_mapTreeTable</span><span class="op">(</span><span class="va">x</span>,</span></span>
<span class="r-in"><span>                    mapping_x <span class="op">=</span> <span class="va">mapping_x</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span>,</span></span>
<span class="r-in"><span>                    plot_size_x <span class="op">=</span> <span class="va">sampled_area</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (2) Mapping shrub individual data</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># Create the individual shrub data frame</span></span></span>
<span class="r-in"><span><span class="va">species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Erica arborea"</span>,<span class="st">"Cistus albidus"</span>, <span class="st">"Erica arborea"</span>, <span class="st">"Cistus albidus"</span>, <span class="st">"Cistus albidus"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">H</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>,<span class="fl">50</span>,<span class="fl">100</span>,<span class="fl">40</span>,<span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">D1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">140</span>,<span class="fl">40</span>,<span class="fl">100</span>, <span class="fl">35</span>,<span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">D2</span> <span class="op">&lt;-</span> <span class="va">D1</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">H</span>, <span class="va">D1</span>, <span class="va">D2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define mapping (D1 and D2 map to variables with the same name)</span></span></span>
<span class="r-in"><span><span class="va">mapping_y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species.name"</span><span class="op">=</span> <span class="st">"species"</span>, <span class="st">"Height"</span> <span class="op">=</span><span class="st">"H"</span>, <span class="st">"D1"</span>, <span class="st">"D2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Map individual shrub data to cover data (here each individual becomes a cohort)</span></span></span>
<span class="r-in"><span><span class="co"># assuming that the sampled area was 4 m2</span></span></span>
<span class="r-in"><span><span class="va">f</span><span class="op">$</span><span class="va">shrubData</span> <span class="op">&lt;-</span> <span class="fu">forest_mapShrubTable</span><span class="op">(</span><span class="va">y</span>,</span></span>
<span class="r-in"><span>                     mapping_y <span class="op">=</span> <span class="va">mapping_y</span>, SpParams <span class="op">=</span> <span class="va">SpParamsMED</span>,</span></span>
<span class="r-in"><span>                     plot_size_y <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (3) Print forest attributes</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">f</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tree BA (m2/ha): 42.6957047  adult trees: 42.6957047  saplings: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Density (ind/ha) adult trees: 3777.277316  saplings: 0  shrubs (estimated): 19051.5105038 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cover (%) adult trees: 100  saplings: 0  shrubs: 65.4334845  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LAI (m2/m2) total: 6.0900572  adult trees: 5.6770407  saplings: 0  shrubs: 0.4130165  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fuel loading (kg/m2) total: 1.5959112  adult trees: 1.493419  saplings: 0  shrubs: 0.1024922  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PAR ground (%): NA  SWR ground (%): NA </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (4) Forest initialization in a single step</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">forest_mapWoodyTables</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>,</span></span>
<span class="r-in"><span>                           mapping_x <span class="op">=</span> <span class="va">mapping_x</span>, mapping_y <span class="op">=</span> <span class="va">mapping_y</span>,</span></span>
<span class="r-in"><span>                           SpParams <span class="op">=</span> <span class="va">SpParamsMED</span>,</span></span>
<span class="r-in"><span>                           plot_size_x <span class="op">=</span> <span class="va">sampled_area</span>, plot_size_y <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">f</span>, <span class="va">SpParamsMED</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tree BA (m2/ha): 42.6957047  adult trees: 42.6957047  saplings: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Density (ind/ha) adult trees: 3777.277316  saplings: 0  shrubs (estimated): 19051.5105038 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cover (%) adult trees: 100  saplings: 0  shrubs: 65.4334845  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> LAI (m2/m2) total: 6.0900572  adult trees: 5.6770407  saplings: 0  shrubs: 0.4130165  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fuel loading (kg/m2) total: 1.5959112  adult trees: 1.493419  saplings: 0  shrubs: 0.1024922  herbs: 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PAR ground (%): NA  SWR ground (%): NA </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Miquel De Cáceres, Nicolas Martin-StPaul, Víctor Granda, Antoine Cabon.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

